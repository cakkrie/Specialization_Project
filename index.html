<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>About</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=BBH+Sans+Bogle&family=Raleway:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <header>
    <div class="left"><a href="index.html">FishOn</a></div>
    <div class="center">
      <a href="about.html">About</a>
      <a href="research.html">Research</a>
    </div>
  </header>

  <main>
    
    <section class="landing-page">
      <div class="landing-page-question">Blend emotional support, real data, and a gamified journey on every trip.

      </div>
      
      <div class="landing-page-title">
        <div class="landing-title-text">FISHON
          <span class="landing-subtitle">Your Fishing Guide Intelligence</span>
          <div class="labels-row">
            <span class="label outline info">Multi-sensor Physicalization</span>
            <span class="label outline info">Community</span>
            <span class="label outline">Play</span>
          </div>
        </div>
      </div>

      <button class="title-cta" onclick="scrollToAbout()" aria-label="What we do">
        <span class="cta-icon" aria-hidden="true">↳</span>
        <span class="cta-text">WHAT WE DO</span>
      </button>
      
      <!-- Labels moved into title above subtitle -->
      
    </section>

    <section class="about-landing2">
      <div class="about-landing2-pin">
        <img src="Photo/main-page/fish-background.jpg" alt="Fishing background" class="about-bg">
          <div class="overlay intro-text" id="market-intro">
            The global fishing market continues to expand steadily, driven by rising seafood demand, growing recreational participation, and advances in aquaculture.
          </div>

        <div class="overlay mid-note" id="mid-note" aria-hidden="true">
          In the recreation fishing, more and more yonger anglers are entering the market due to the change of lifestyle. 
        </div>

        <div class="overlay trend-row" id="trend-row" aria-hidden="true">
          <div class="overlay trend-card" id="young-trend" aria-hidden="true">
            <h3>Lack of experience</h3>
            <p>The growing participation among Gen Z usually don't have much experience and need help from friends to guide them on fishing.</p>
          </div>
          <div class="overlay trend-card" id="rely-tech" aria-hidden="true">
            <h3>Rely on technology</h3>
            <p>Mobile apps, sonar, and AI-driven insights increasingly guide spot selection and tactics.</p>
          </div>
          <div class="overlay trend-card" id="limited-time" aria-hidden="true">
            <h3>Limited time on fishing</h3>
            <p>Busy schedules push for efficient, outcome-oriented trips and bite-time optimization.</p>
          </div>
        </div>
      </div>
    </section>

    <section class="hmw-section">
      <div class="hmw-container">
        <div class="hmw-eyebrow">How might we design a tool</div>
        <h2 class="hmw-headline">for younger anglers</h2>
        <div class="hmw-sub">In the digitalized era?</div>
      </div>
    </section>

    
    <section class="bubble-section">
      <div id="bubble-field" class="bubble-field" aria-live="polite"></div>

      <div class="bubble-cta">
        <a href="fishing-community.html" class="title-cta" aria-label="Explore Fishing Community">
          <span class="cta-icon" aria-hidden="true">↳</span>
          <span class="cta-text">EXPLORE FISHING COMMUNITY</span>
        </a>
      </div>


      <section class="fc-stats">
        <div class="fc-stat">
          <div class="num"><span class="value">280M</span><span class="plus">+</span></div>
          <div class="label">Global Angers</div>
        </div>
        <div class="fc-stat">
          <div class="num"><span class="value">5%</span><span class="plus">+</span></div>
          <div class="label">Annual Growth Rate</div>
        </div>
        <div class="fc-stat">
          <div class="num"><span class="value">567B</span><span class="plus">+</span></div>
          <div class="label">Fishing Market in 2024</div>
        </div>
      </section>

      <section class="small-cards-section">
        <div class="small-cards-grid">
          <div class="small-card white">
            <div class="small-card-title">Hardware</div>
          </div>
          <div class="small-card gray">
            <div class="small-card-title">Software</div>
          </div>
        </div>
      </section>
      
    </section>
    
    <!-- Architecture Diagram (code-drawn) inserted before earth-section -->
    <section class="uml-section">
      <svg class="uml-diagram" viewBox="0 -100 1700 4000" role="img" aria-label="System architecture diagram">
        <defs>
          <filter id="cardShadow" x="-20%" y="-20%" width="140%" height="140%">
            <feDropShadow dx="0" dy="8" stdDeviation="10" flood-color="#000" flood-opacity="0.35"/>
          </filter>
          <marker id="arrow" viewBox="0 0 10 10" refX="9" refY="5" markerWidth="6" markerHeight="6" orient="auto-start-reverse">
            <path d="M 0 0 L 10 5 L 0 10 z" fill="#8a8a8a"/>
          </marker>
          <style>
            .card { fill:#111111; stroke:none; stroke-width:0; rx:0; filter:url(#cardShadow); }
            .card-light-gray { fill:#d3d3d3; stroke:none; stroke-width:0; rx:0; filter:url(#cardShadow); }
            .title-light-gray { font: 700 18px Raleway, Helvetica, Arial, sans-serif; fill:#000000; }
            .kv-light-gray { font: 400 12px Raleway, Helvetica, Arial, sans-serif; fill:#000000; }
            .sep-light-gray { stroke:#000000; stroke-width:1; }
            .user-card { fill:#ffffff; stroke:#e5e5e5; stroke-width:1; rx:0; filter:url(#cardShadow); }
            .customer-card { fill:#ffffff; stroke:#e5e5e5; stroke-width:1; rx:0; filter:url(#cardShadow); }
            .title { font: 700 18px Raleway, Helvetica, Arial, sans-serif; fill:#ffffff; }
            .user-title { font: 700 18px Raleway, Helvetica, Arial, sans-serif; fill:#0d1520; }
            .customer-title { font: 700 18px Raleway, Helvetica, Arial, sans-serif; fill:#0d1520; }
            .meta { font: 500 13px Raleway, Helvetica, Arial, sans-serif; fill:#6b7280; }
            .kv { font: 400 12px Raleway, Helvetica, Arial, sans-serif; fill:#ffffff; }
            .user-kv { font: 400 12px Raleway, Helvetica, Arial, sans-serif; fill:#374151; }
            .customer-kv { font: 400 12px Raleway, Helvetica, Arial, sans-serif; fill:#374151; }
            .sep { stroke:#444444; stroke-width:1; }
            .user-sep { stroke:#e5e7eb; stroke-width:1; }
            .customer-sep { stroke:#e5e7eb; stroke-width:1; }
            .label { font: 500 12px Raleway, Helvetica, Arial, sans-serif; fill:#9ca3af; }
            .wire { stroke:#8a8a8a; stroke-width:2; fill:none; marker-end:url(#arrow); }
            .wire[stroke-dasharray] { stroke-dasharray: 5,5; }
          </style>
        </defs>
        
        <!-- Left side label -->
        <text class="label" x="120" y="240">has (0..*)</text>
        
        <!-- Row 1 -->
        <g transform="translate(180,-20)">
          <rect class="user-card" width="300" height="400"/>
          <text class="user-title" x="16" y="34">User</text>
          <line class="user-sep" x1="16" y1="44" x2="264" y2="44"/>
          <text class="user-kv"  x="16" y="68">userID: String</text>
          <text class="user-kv"  x="16" y="88">username: String</text>
          <text class="user-kv"  x="16" y="108">email: String</text>
          <text class="user-kv"  x="16" y="128">passwordHash: String</text>
          <text class="user-kv"  x="16" y="148">level: Int, exp: Int</text>
          <text class="user-kv"  x="16" y="168">badges: List</text>
          <text class="user-kv"  x="16" y="188">preferredFishSpecies: List</text>
          <text class="user-kv"  x="16" y="208">homeLocation: GeoPoint</text>
          <text class="user-kv"  x="16" y="228">emotionState: String</text>
          <line class="user-sep" x1="16" y1="242" x2="264" y2="242"/>
          <text class="user-kv"  x="16" y="266">+ login(email,pwd)</text>
          <text class="user-kv"  x="16" y="286">+ updatedProfile(info)</text>
          <text class="user-kv"  x="16" y="306">+ updatePreferences(prefs)</text>
          <text class="user-kv"  x="16" y="326">+ trackEmotion(mood)</text>
          <text class="user-kv"  x="16" y="346">+ joinChallenge(id)</text>
          <text class="user-kv"  x="16" y="366">+ shareCatch(id)</text>
        </g>

        <g transform="translate(560,20)">
          <rect class="card" width="300" height="360"/>
          <text class="title" x="16" y="34">FishingSession</text>
          <line class="sep" x1="16" y1="44" x2="264" y2="44"/>
          <text class="kv"  x="16" y="68">sessionID: String</text>
          <text class="kv"  x="16" y="88">userID: String</text>
          <text class="kv"  x="16" y="108">startTime/endTime: DateTime</text>
          <text class="kv"  x="16" y="128">location: GeoPoint</text>
          <text class="kv"  x="16" y="148">weather: WeatherData</text>
          <text class="kv"  x="16" y="168">catchFish: List;</text>
          <text class="kv"  x="16" y="188">moodLog: List;</text>
          <line class="sep" x1="16" y1="202" x2="264" y2="202"/>
          <text class="kv"  x="16" y="226">+ startSession()</text>
          <text class="kv"  x="16" y="246">+ endSession()</text>
          <text class="kv"  x="16" y="266">+ recordCatch(data)</text>
          <text class="kv"  x="16" y="286">+ updateWeather(weather)</text>
          <text class="kv"  x="16" y="306">+ analyzePerformance()</text>
        </g>

        <g transform="translate(940,20)">
          <rect class="card" width="300" height="360"/>
          <text class="title" x="16" y="34">Spot</text>
          <line class="sep" x1="16" y1="44" x2="264" y2="44"/>
          <text class="kv"  x="16" y="68">sessionID: String</text>
          <text class="kv"  x="16" y="88">userID: String</text>
          <text class="kv"  x="16" y="108">startTime/endTime: DateTime</text>
          <text class="kv"  x="16" y="128">location: GeoPoint</text>
          <text class="kv"  x="16" y="148">region: String</text>
          <text class="kv"  x="16" y="168">averageScore: Float</text>
          <text class="kv"  x="16" y="188">fishSpecies: List</text>
          <text class="kv"  x="16" y="208">weatherPattern: WeatherData</text>
          <text class="kv"  x="16" y="228">popularity: Float</text>
          <text class="kv"  x="16" y="248">accessibility: String</text>
          <line class="sep" x1="16" y1="262" x2="264" y2="262"/>
          <text class="kv"  x="16" y="286">+ getCurrentWeather()</text>
          <text class="kv"  x="16" y="306">+ getRecommendedTimeWindow()</text>
          <text class="kv"  x="16" y="326">+ calculateScore(user)</text>
          <text class="kv"  x="16" y="346">+ updatePopularity()</text>
        </g>
        <g transform="translate(1320,-20)">
          <rect class="card-light-gray" width="300" height="400"/>
          <text class="title-light-gray" x="16" y="34">RecommendationEngine</text>
          <line class="sep-light-gray" x1="16" y1="44" x2="264" y2="44"/>
          <text class="kv-light-gray"  x="16" y="68">modelType: String</text>
          <text class="kv-light-gray"  x="16" y="88">trainingData: Dataset</text>
          <text class="kv-light-gray"  x="16" y="108">weighting: Map</text>
          <text class="kv-light-gray"  x="16" y="128">recentSpots: List</text>
          <text class="kv-light-gray"  x="16" y="148">fishActivityModel: MLModel</text>
          <line class="sep-light-gray" x1="16" y1="162" x2="264" y2="162"/>
          <text class="kv-light-gray"  x="16" y="186">+ generateSpotsRecommendation(user, weather)</text>
          <text class="kv-light-gray"  x="16" y="206">+ updateModel(data)</text>
          <text class="kv-light-gray"  x="16" y="226">+ predictBiteProbability(spot,time)</text>
          <text class="kv-light-gray"  x="16" y="246">+ rankSpots(spots)</text>
        </g>

        <!-- Row 2 -->
        <g transform="translate(180,460)">
          <rect class="card" width="300" height="320"/>
          <text class="title" x="16" y="34">Challenge</text>
          <line class="sep" x1="16" y1="44" x2="264" y2="44"/>
          <text class="kv"  x="16" y="68">challengeID: String</text>
          <text class="kv"  x="16" y="88">title: String</text>
          <text class="kv"  x="16" y="108">type: String</text>
          <text class="kv"  x="16" y="128">startDate/endDate: DateTime</text>
          <text class="kv"  x="16" y="148">participants: List</text>
          <text class="kv"  x="16" y="168">price: List</text>
          <text class="kv"  x="16" y="188">leaderboard: Map</text>
          <line class="sep" x1="16" y1="202" x2="264" y2="202"/>
          <text class="kv"  x="16" y="226">+ join(userId)</text>
          <text class="kv"  x="16" y="246">+ submitResult(catch)</text>
          <text class="kv"  x="16" y="266">+ updateLeaderboard()</text>
          <text class="kv"  x="16" y="286">+ annouceWinner()</text>
        </g>

        <g transform="translate(560,460)">
          <rect class="card" width="300" height="320"/>
          <text class="title" x="16" y="34">Catch</text>
          <line class="sep" x1="16" y1="44" x2="264" y2="44"/>
          <text class="kv"  x="16" y="68">catchID: String</text>
          <text class="kv"  x="16" y="88">fishSpecies: String</text>
          <text class="kv"  x="16" y="108">length/weight: Float</text>
          <text class="kv"  x="16" y="128">timeCaught: DateTime</text>
          <text class="kv"  x="16" y="148">location: GeoPoint</text>
          <text class="kv"  x="16" y="168">photoURL: String</text>
          <text class="kv"  x="16" y="188">EmotionTag: String</text>
          <text class="kv"  x="16" y="208">WeatherAtCatch: WeatherData</text>
          <line class="sep" x1="16" y1="222" x2="264" y2="222"/>
          <text class="kv"  x="16" y="246">+ updatePhoto(photo)</text>
          <text class="kv"  x="16" y="266">+ identifySpecies(photo)</text>
          <text class="kv"  x="16" y="286">+ addEmotionTag(tag)</text>
        </g>

        <g transform="translate(940,460)">
          <rect class="card-light-gray" width="300" height="320"/>
          <text class="title-light-gray" x="16" y="34">WeatherData</text>
          <line class="sep-light-gray" x1="16" y1="44" x2="264" y2="44"/>
          <text class="kv-light-gray"  x="16" y="68">temperature: Float</text>
          <text class="kv-light-gray"  x="16" y="88">humidity: Float</text>
          <text class="kv-light-gray"  x="16" y="108">airPressure: Float</text>
          <text class="kv-light-gray"  x="16" y="128">windSpeed: Float</text>          <text class="kv-light-gray"  x="16" y="68">temperature: Float</text>
          <text class="kv-light-gray"  x="16" y="148">moonPhase: Float</text>
          <text class="kv-light-gray"  x="16" y="168">tidelevel: String</text>
          <text class="kv-light-gray"  x="16" y="188">moonPhase: Float</text>
          <text class="kv-light-gray"  x="16" y="208">sunrise/sunset: DateTime</text>
          <line class="sep-light-gray" x1="16" y1="222" x2="264" y2="222"/>
          <text class="kv-light-gray"  x="16" y="246">+ fetchFromAPI(lat, lon)</text>
          <text class="kv-light-gray"  x="16" y="266">+ analyzeFishingWindow()</text>
          <text class="kv-light-gray"  x="16" y="286">+ compareWithIdealConditions()</text>
        </g>
        <g transform="translate(1320,460)">
          <rect class="card-light-gray" width="300" height="320"/>
          <text class="title-light-gray" x="16" y="34">EmotionAI</text>
          <line class="sep-light-gray" x1="16" y1="44" x2="264" y2="44"/>
          <text class="kv-light-gray"  x="16" y="68">emotionModel: ML</text>
          <text class="kv-light-gray"  x="16" y="88">rewardStrategy: Map</text>
          <text class="kv-light-gray"  x="16" y="108">sentimentHistory: List</text>
          <line class="sep-light-gray" x1="16" y1="122" x2="264" y2="122"/>
          <text class="kv-light-gray"  x="16" y="146">+ detectMood(mood)</text>
          <text class="kv-light-gray"  x="16" y="166">+ logMoodChanges(mood, perfd)</text>
          <text class="kv-light-gray"  x="16" y="186">+ generateEncouragement(mood)</text>
          <text class="kv-light-gray"  x="16" y="206">+ updateRewardSystem()</text>
        </g>

        <!-- Row 3 -->
        <text class="label" x="120" y="980">has (0..*)</text>
        <g transform="translate(180,860)">
          <rect class="card" width="300" height="300"/>
          <text class="title" x="16" y="34">Badge</text>
          <line class="sep" x1="16" y1="44" x2="264" y2="44"/>
          <text class="kv"  x="16" y="68">badgeID: String</text>
          <text class="kv"  x="16" y="88">name: String</text>
          <text class="kv"  x="16" y="108">description: String</text>
          <text class="kv"  x="16" y="128">icon: String</text>
          <text class="kv"  x="16" y="148">condition: String</text>
          <line class="sep" x1="16" y1="162" x2="264" y2="162"/>
          <text class="kv"  x="16" y="186">+ checkEligibility(user)</text>
          <text class="kv"  x="16" y="206">+ assignToUser(userId)</text>
          <text class="kv"  x="16" y="226">+ displayBadge()</text>
        </g>

        <g transform="translate(1320,1240)">
          <rect class="customer-card" width="300" height="300"/>
          <text class="customer-title" x="16" y="34">CustomerModel</text>
          <line class="customer-sep" x1="16" y1="44" x2="264" y2="44"/>
          <text class="customer-kv"  x="16" y="68">userID: String</text>
          <text class="customer-kv"  x="16" y="88">behaviorData: List</text>
          <text class="customer-kv"  x="16" y="108">preferenceProfile: Map</text>
          <text class="customer-kv"  x="16" y="128">engagementScore: Float</text>
          <text class="customer-kv"  x="16" y="148">userLevel: String</text> 
          <line class="customer-sep" x1="16" y1="162" x2="264" y2="162"/>
          <text class="customer-kv"  x="16" y="186">+ canalyzeBehavior(user)</text>
          <text class="customer-kv"  x="16" y="206">+ updateSegmentation(data)</text>
          <text class="customer-kv"  x="16" y="226">+ generateRecommendations(user)</text>
        </g>

        <g transform="translate(180,1240)">
          <rect class="card" width="300" height="300"/>
          <text class="title" x="16" y="34">DataLogger</text>
          <line class="sep" x1="16" y1="44" x2="264" y2="44"/>
          <text class="kv"  x="16" y="68">storagePath: String</text>
          <text class="kv"  x="16" y="88">sessionHistory: List</text>
          <text class="kv"  x="16" y="108">catchIimit: Int</text>
          <line class="sep" x1="16" y1="122" x2="264" y2="122"/>
          <text class="kv"  x="16" y="146">+ saveSession(data)</text>
          <text class="kv"  x="16" y="166">+ exportCSV()</text>
          <text class="kv"  x="16" y="186">+ syncWithCloud()</text>
          <text class="kv"  x="16" y="206">+ loadHistory(userID)</text>
        </g>
                <!-- Row 4 -->
        <g transform="translate(180,1620)">
          <rect class="card" width="300" height="100"/>
          <text class="title" x="16" y="34">CloudDB</text>
          <line class="sep" x1="16" y1="44" x2="264" y2="44"/>
          <text class="kv"  x="16" y="68">provider: String</text>
          <text class="kv"  x="16" y="88">region: String</text>
        </g>


        <g transform="translate(940,860)">
          <rect class="card" width="300" height="300"/>
          <text class="title" x="16" y="34">MapUI</text>
          <line class="sep" x1="16" y1="44" x2="264" y2="44"/>
          <text class="kv"  x="16" y="68">mapLayer: Map</text>
          <text class="kv"  x="16" y="88">uiState: Object</text>
          <text class="kv"  x="16" y="108">selectedSpot: Spot</text>
          <text class="kv"  x="16" y="128">weatherOverlay: Boolean</text>
          <line class="sep" x1="16" y1="142" x2="264" y2="142"/>
          <text class="kv"  x="16" y="166">+ displaySpots()</text>
          <text class="kv"  x="16" y="186">+ toggleWeatherOverlay()</text>
        </g>

        <g transform="translate(1320,860)">
          <rect class="card-light-gray" width="300" height="300"/>
          <text class="title-light-gray" x="16" y="34">ARSession</text>
          <line class="sep-light-gray" x1="16" y1="44" x2="264" y2="44"/>
          <text class="kv-light-gray"  x="16" y="68">sessionID: String</text>
          <text class="kv-light-gray"  x="16" y="88">cameraConfig: Struct</text>
          <text class="kv-light-gray"  x="16" y="108">recognizedObjects: List</text>
          <text class="kv-light-gray"  x="16" y="128">anchorPoints: List</text>
          <text class="kv-light-gray"  x="16" y="148">activeOverlay: Boolean</text>
          <line class="sep-light-gray" x1="16" y1="162" x2="264" y2="162"/>
          <text class="kv-light-gray"  x="16" y="186">+ activateOverlay()</text>
        </g>
         
        <!-- Row 5 - Detailed RecommendationEngine (below CloudDB) -->
        <g transform="translate(180,2120)">
          <rect class="card-light-gray" width="300" height="400"/>
          <text class="title-light-gray" x="16" y="34">RecommendationEngine</text>
          <line class="sep-light-gray" x1="16" y1="44" x2="264" y2="44"/>
          <text class="kv-light-gray"  x="16" y="68">modelType: String</text>
          <text class="kv-light-gray"  x="16" y="88">trainingData: Dataset</text>
          <text class="kv-light-gray"  x="16" y="108">weightingFactors: Map</text>
          <text class="kv-light-gray"  x="16" y="128">recentSpots: List</text>
          <text class="kv-light-gray"  x="16" y="148">fishActivityModel: MLModel</text>
          <line class="sep-light-gray" x1="16" y1="162" x2="264" y2="162"/>
          <text class="kv-light-gray"  x="16" y="186">+ generateSpotRecommendation(user, weather)</text>
          <text class="kv-light-gray"  x="16" y="206">+ updateModel(data)</text>
          <text class="kv-light-gray"  x="16" y="226">+ predictCatchProbability(spot, time)</text>
          <text class="kv-light-gray"  x="16" y="246">+ rankSpots(spots)</text>
        </g>

        <!-- Multi-factor weighted prediction model text (right of RecommendationEngine) -->
        <g transform="translate(540,2120)">
          <text x="0" y="40" style="font-size: 20px; font-weight: bold; fill: #9ca3af; font-family: Raleway, Helvetica, Arial, sans-serif;">Multi-factor weighted prediction</text>
          <text x="0" y="65" style="font-size: 20px; font-weight: bold; fill: #9ca3af; font-family: Raleway, Helvetica, Arial, sans-serif;">model (regression / probabilistic ranking)</text>
          <text x="0" y="120" style="font-size: 16px; fill: #9ca3af; font-family: Raleway, Helvetica, Arial, sans-serif;">Involves data normalization,</text>
          <text x="0" y="145" style="font-size: 16px; fill: #9ca3af; font-family: Raleway, Helvetica, Arial, sans-serif;">feature weighting, and</text>
          <text x="0" y="170" style="font-size: 16px; fill: #9ca3af; font-family: Raleway, Helvetica, Arial, sans-serif;">regression analysis to rank</text>
          <text x="0" y="195" style="font-size: 16px; fill: #9ca3af; font-family: Raleway, Helvetica, Arial, sans-serif;">fishing spots.</text>
        </g>


        <!-- Time-series forecasting text (right of WeatherData) -->
        <g transform="translate(540,2580)">
          <text x="0" y="40" style="font-size: 20px; font-weight: bold; fill: #9ca3af; font-family: Raleway, Helvetica, Arial, sans-serif;">Time-series forecasting and</text>
          <text x="0" y="65" style="font-size: 20px; font-weight: bold; fill: #9ca3af; font-family: Raleway, Helvetica, Arial, sans-serif;">correlation analysis</text>
          <text x="0" y="120" style="font-size: 16px; fill: #9ca3af; font-family: Raleway, Helvetica, Arial, sans-serif;">Predicting fish activity based on</text>
          <text x="0" y="145" style="font-size: 16px; fill: #9ca3af; font-family: Raleway, Helvetica, Arial, sans-serif;">meteorological changes</text>
          <text x="0" y="170" style="font-size: 16px; fill: #9ca3af; font-family: Raleway, Helvetica, Arial, sans-serif;">(temperature, pressure, tide).</text>
          <text x="0" y="205" style="font-size: 16px; fill: #9ca3af; font-family: Raleway, Helvetica, Arial, sans-serif;">Requires trend detection and curve</text>
          <text x="0" y="230" style="font-size: 16px; fill: #9ca3af; font-family: Raleway, Helvetica, Arial, sans-serif;">fitting.</text>
        </g>

                <!-- Row 5 - Detailed WeatherData (below RecommendationEngine) -->
        <g transform="translate(180,2580)">
          <rect class="card-light-gray" width="300" height="400"/>
          <text class="title-light-gray" x="16" y="34">WeatherData</text>
          <line class="sep-light-gray" x1="16" y1="44" x2="264" y2="44"/>
          <text class="kv-light-gray"  x="16" y="68">temperature: Float</text>
          <text class="kv-light-gray"  x="16" y="88">humidity: Float</text>
          <text class="kv-light-gray"  x="16" y="108">airPressure: Float</text>
          <text class="kv-light-gray"  x="16" y="128">windSpeed: Float</text>
          <text class="kv-light-gray"  x="16" y="148">moonPhase: String</text>
          <text class="kv-light-gray"  x="16" y="168">tideLevel: Float</text>
          <text class="kv-light-gray"  x="16" y="188">sunrise: DateTime</text>
          <text class="kv-light-gray"  x="16" y="208">sunset: DateTime</text>
          <line class="sep-light-gray" x1="16" y1="222" x2="264" y2="222"/>
          <text class="kv-light-gray"  x="16" y="246">+ fetchFromAPI(lat, lon)</text>
          <text class="kv-light-gray"  x="16" y="266">+ analyzeFishingWindow()</text>
          <text class="kv-light-gray"  x="16" y="286">+ compareWithIdealConditions()</text>
        </g>


                <!-- Row 5 - Detailed WeatherData (below RecommendationEngine) -->
        <g transform="translate(180,3040)">
          <rect class="card-light-gray" width="300" height="400"/>
          <text class="title-light-gray" x="16" y="34">ARSession</text>
          <line class="sep-light-gray" x1="16" y1="44" x2="264" y2="44"/>
          <text class="kv-light-gray"  x="16" y="68">sessionID: String</text>
          <text class="kv-light-gray"  x="16" y="88">cameraInput: Stream</text>
          <text class="kv-light-gray"  x="16" y="108">recognizedObjects: List</text>
          <text class="kv-light-gray"  x="16" y="128">anchorPoints: List</text>
          <text class="kv-light-gray"  x="16" y="148">activeCatchOverlay: Boolean</text>
          <line class="sep-light-gray" x1="16" y1="162" x2="264" y2="162"/>
          <text class="kv-light-gray"  x="16" y="186">+ initializeAR()</text>
          <text class="kv-light-gray"  x="16" y="206">+ detechFish()</text>
          <text class="kv-light-gray"  x="16" y="226">+ display3Doverlay()</text>                
          <text class="kv-light-gray"  x="16" y="246">+ record3DCatch()</text>
        </g>

        <!-- Geometric Projection Text (right of ARSession) -->
        <g transform="translate(540,3040)">
          <text x="0" y="40" style="font-size: 20px; font-weight: bold; fill: #9ca3af; font-family: Raleway, Helvetica, Arial, sans-serif;">Geometric projection &amp; spatial</text>
          <text x="0" y="65" style="font-size: 20px; font-weight: bold; fill: #9ca3af; font-family: Raleway, Helvetica, Arial, sans-serif;">measurement from images</text>
          <text x="0" y="120" style="font-size: 16px; fill: #9ca3af; font-family: Raleway, Helvetica, Arial, sans-serif;">Computing object size and</text>
          <text x="0" y="145" style="font-size: 16px; fill: #9ca3af; font-family: Raleway, Helvetica, Arial, sans-serif;">position from camera images</text>
          <text x="0" y="170" style="font-size: 16px; fill: #9ca3af; font-family: Raleway, Helvetica, Arial, sans-serif;">using projection matrices and</text>
          <text x="0" y="195" style="font-size: 16px; fill: #9ca3af; font-family: Raleway, Helvetica, Arial, sans-serif;">pixel-to-real length conversion.</text>
        </g>

                <!-- Row 5 - Detailed WeatherData (below RecommendationEngine) -->
        <g transform="translate(180,3500)">
          <rect class="card-light-gray" width="300" height="400"/>
          <text class="title-light-gray" x="16" y="34">EmotionAI</text>
          <line class="sep-light-gray" x1="16" y1="44" x2="264" y2="44"/>
          <text class="kv-light-gray"  x="16" y="68">emotionModel: MLModel</text>              
          <text class="kv-light-gray"  x="16" y="88">userMoodHistory: List</text>
          <text class="kv-light-gray"  x="16" y="108">rewardMessage: Map</text>
          <line class="sep-light-gray" x1="16" y1="122" x2="264" y2="122"/>
          <text class="kv-light-gray"  x="16" y="146">+ detectMood()</text>
          <text class="kv-light-gray"  x="16" y="166">+ generateEncouragement(mood,perf)</text>
          <text class="kv-light-gray"  x="16" y="186">+ loogMoodChanges(user,mood)</text>
          <text class="kv-light-gray"  x="16" y="206">+ updateRewardSystem()</text>
        </g>

        <!-- Numerical feature extraction text (right of EmotionAI) -->
        <g transform="translate(540,3500)">
          <text x="0" y="40" style="font-size: 20px; font-weight: bold; fill: #9ca3af; font-family: Raleway, Helvetica, Arial, sans-serif;">Numerical feature extraction and</text>
          <text x="0" y="65" style="font-size: 20px; font-weight: bold; fill: #9ca3af; font-family: Raleway, Helvetica, Arial, sans-serif;">sentiment scoring</text>
          <text x="0" y="120" style="font-size: 16px; fill: #9ca3af; font-family: Raleway, Helvetica, Arial, sans-serif;">Transforming facial or text input into</text>
          <text x="0" y="145" style="font-size: 16px; fill: #9ca3af; font-family: Raleway, Helvetica, Arial, sans-serif;">vector representations and computing</text>
          <text x="0" y="170" style="font-size: 16px; fill: #9ca3af; font-family: Raleway, Helvetica, Arial, sans-serif;">weighted mood scores via classification</text>
          <text x="0" y="195" style="font-size: 16px; fill: #9ca3af; font-family: Raleway, Helvetica, Arial, sans-serif;">or similarity functions.</text>
        </g>

        <!-- Wires -->
        <!-- User connections -->
        <path class="wire" d="M330,440 L330,380"/><!-- Challenge top edge -> User bottom edge -->
        <text class="label" x="342" y="410">aggregates</text>
        <path class="wire" d="M480,380 L560,460"/><!-- User bottom edge -> Catch top edge -->
        <text class="label" x="510" y="410">creates</text>
        <!-- <path class="wire" d="M480,230 L1320,630"/><!-- User right edge -> EmotionAI left edge -->
        <text class="label" x="900" y="410">uses</text> 
        <path class="wire" d="M480,10 L1320,10" stroke-dasharray="5,5"/><!-- User top edge -> RecommendationEngine top edge (dashed) -->
        <text class="label" x="900" y="0">uses</text>
        
        <!-- FishingSession connections -->
        <path class="wire" d="M700,380 L700,460" stroke-dasharray="5,5"/><!-- FishingSession bottom edge -> Catch top edge (dashed) -->
        <text class="label" x="700" y="410">contains (0..*)</text>
        
        
        
        
        <!-- Catch connections -->
        <path class="wire" d="M860,780 L940,860"/><!-- Catch bottom edge -> MapUI left edge -->
        <text class="label" x="890" y="820">uses</text>
        
        <!-- Catch to Spot connection -->
        <path class="wire" d="M860,580 L940,580"/><!-- Catch right edge -> Spot bottom left edge -->
        <text class="label" x="860" y="545">record at (1..)</text>
        
        <!-- WeatherData connections -->
        <path class="wire" d="M1240,630 L1320,630"/><!-- WeatherData right edge -> EmotionAI left edge -->
        
        <!-- DataLogger connections -->
        <path class="wire" d="M330,1540 L330,1620"/><!-- DataLogger bottom edge -> CloudDB top edge -->
        <text class="label" x="342" y="1590">syncs</text>
        
        <!-- MapUI connections -->
        <path class="wire" d="M1240,970 L1320,970"/><!-- MapUI right edge -> ARSession left edge -->
        <text class="label" x="1280" y="970">uses</text>
      </svg>
    </section>

      <a href="sequence-diagram.html" class="uml-diagram-link">
        <img src="Photo/UML.png" alt="UML Diagram" class="uml-diagram">
        <div class="diagram-overlay">
          <h3>View Interactive Sequence Diagram</h3>
          <p>Click to explore the complete system flow</p>
        </div>
      </a>

      <!-- Earth Visualization Section -->
      <div class="earth-section">
        <div class="earth-container">
          <div class="earth-layers">
            <canvas id="layer-bottom" class="earth-layer" data-layer="bottom" width="675" height="675"></canvas>
            <canvas id="layer-middle" class="earth-layer" data-layer="middle" width="675" height="675"></canvas>
            <canvas id="layer-top" class="earth-layer" data-layer="top" width="675" height="675"></canvas>
          </div>
        </div>
        
        <div class="earth-content">
          <div class="earth-info" id="earth-info">
            <div class="info-item active" data-layer="bottom">
              <h2>2D Map Interface</h2>
              <ul>
                <li>Recommendation engine</li>
                <li>Community-marked fishing spots</li>
                <li>Real-time weather overlays & ideal time suggestions</li>
                <li>Route planning and GPS-based navigation</li>
              </ul>
            </div>
            <div class="info-item" data-layer="middle">
              <h2>2.5D Map Interface</h2>
              <ul>
                <li>Unlock & track regional fish species</li>
                <li>Check-in system with badges & rewards</li>
                <li>Encouragement system via motivational popups</li>
                <li>Beginner-friendly suggestion cards</li>
              </ul>
            </div>
            <div class="info-item" data-layer="top">
              <h2>4D XR Map Interface</h2>
              <ul>
                <li>Visual reconstruction of fish spots via 3D scanning</li>
                <li>AR-based immersive previews</li>
                <li>Fish species terrain recognition with AI guidance</li>
                <li>Species detection & highlight moment replay</li>
              </ul>
            </div>
          </div>
        </div>
      </div>

       <!-- Parallax Section -->
       <div class="parallax-container" id="parallax-container">
          <div class="parallax-wrapper">
            <img src="Photo/bottom_layer.png" alt="Bottom Layer Parallax" class="parallax-image" id="parallax-image">
            
            <!-- Phone screens in the center -->
            <div class="screen-container">
              <img src="Photo/buttom1_screen.png" alt="Screen 1" class="phone-screen screen-1">
              <img src="Photo/buttom2_screen.png" alt="Screen 2" class="phone-screen screen-2">
              <img src="Photo/buttom3_screen.png" alt="Screen 3" class="phone-screen screen-3">
            </div>
            
            <svg class="progress-ring" width="675" height="675">
              <circle class="progress-circle-bg" cx="337.5" cy="337.5" r="335.5" fill="none" stroke="#333" stroke-width="2"/>
              <circle class="progress-circle progress-section-1" cx="337.5" cy="337.5" r="335.5" fill="none" stroke="#ffffff" stroke-width="1.5" stroke-dasharray="703" stroke-dashoffset="703"/>
              <circle class="progress-circle progress-section-2" cx="337.5" cy="337.5" r="335.5" fill="none" stroke="#ffffff" stroke-width="1.5" stroke-dasharray="703" stroke-dashoffset="703"/>
              <circle class="progress-circle progress-section-3" cx="337.5" cy="337.5" r="335.5" fill="none" stroke="#ffffff" stroke-width="1.5" stroke-dasharray="703" stroke-dashoffset="703"/>
            </svg>
            <div class="parallax-titles">
              <div class="title-text title-1"><span>2D Map</span><span class="title-sub">Real-time overlays and navigation</span><span class="title-body">A data-driven map that visualizes real fishing spots, weather, and location information for quick decision-making</span></div>
              <div class="title-text title-2"><span>2.5D Map</span><span class="title-sub">Emotion & Discovery Map</span><span class="title-body">A semi-immersive map blending 3D depth and emotional feedback, exploration through ambient visuals.</span></div>
              <div class="title-text title-3"><span>4D XR Map</span><span class="title-sub">Immersive XR previews</span><span class="title-body">An extended-reality environment that anchors fish and environment in real-world space, merging physical and virtual fishing experiences.</span></div>
            </div>
          </div>
       </div>
       
       
       <!-- Grey Card Section (3vh spacing from bottom) -->
       <section class="bottom-card-section">
         <h2 class="section-main-title">Radical Prototype</h2>
         <div class="grey-card" id="tiltCard">
           <div class="card-text">
             Letting users to "see" the dynamic fish habitats and real-time encouragement from an AI multidimensional agent, creating an immersive yet emotionally supportive fishing journey
           </div>
         </div>
       </section>
       
       <!-- Small Cards Grid Section -->
       <section class="small-cards-section">
         <div class="small-cards-grid">
           <div class="small-card">
             <div class="small-card-title">Fishing Tech</div>
             <div class="small-card-description">Envisions a future where fishing blends data, emotion, and nature to explore new nature–AI relationships.</div>
           </div>
           <div class="small-card">
             <div class="small-card-title">Provocative</div>
             <div class="small-card-description">Balance tech's focus on efficiency and experience with emphasizing mindfulness, emotion, and play.</div>
           </div>
           <div class="small-card">
             <div class="small-card-title">Narrative-driven</div>
             <div class="small-card-description">Builds a story between user, environment and community through every fishing journey.</div>
           </div>
           <div class="small-card">
             <div class="small-card-title">Experience over functional</div>
             <div class="small-card-description">Focuses on illustrating ideas of journey while blending technical completion.</div>
           </div>
           <div class="small-card">
             <div class="small-card-title">Speculative</div>
             <div class="small-card-description">Connects speculative storytelling with design research to reflect on the fishing community.</div>
           </div>
         </div>
       </section>
  </main>

  <script>
    // Initialize when DOM is loaded
    document.addEventListener('DOMContentLoaded', function() {
      initEarthInteraction();
      initStickyEffect();
      initAboutLanding2Scroll();
      initTiltCard();
    });
    
    // Tilt card effect
    function initTiltCard() {
      const card = document.getElementById('tiltCard');
      if (!card) return;
      
      // On hover: straighten the card
      card.addEventListener('mouseenter', function() {
        card.classList.add('hovered');
      });
      
      card.addEventListener('mouseleave', function() {
        card.classList.remove('hovered');
      });
    }

    function scrollToAbout() {
      const target = document.querySelector('.about-landing2');
      if (target) {
        target.scrollIntoView({ behavior: 'smooth', block: 'start' });
      }
    }


    // Scroll-based animation functionality
    function initScrollAnimations() {
      const cards = document.querySelectorAll('.project-card');
      
      // Intersection Observer for fade-in animation
      const observerOptions = {
        threshold: 0.2,
        rootMargin: '0px 0px -50px 0px'
      };

      const observer = new IntersectionObserver((entries) => {
        entries.forEach((entry) => {
          if (entry.isIntersecting) {
            const cardIndex = Array.from(cards).indexOf(entry.target);
            // Stagger animation with increasing delay
            setTimeout(() => {
              entry.target.classList.add('animate-in');
            }, cardIndex * 100);
          }
        });
      }, observerOptions);

      // Observe all cards
      cards.forEach(card => {
        observer.observe(card);
      });
    }

    // Initialize animations and load header when DOM is loaded
    document.addEventListener('DOMContentLoaded', function() {
      if (typeof loadHeader === 'function') {
        loadHeader();
      }
      initScrollAnimations();
    });

    // Sticky scroll control for about-landing2 (2500px total pin, 5 stages)
    function initAboutLanding2Scroll() {
      const section = document.querySelector('.about-landing2');
      const pin = document.querySelector('.about-landing2-pin');
      const intro = document.getElementById('market-intro');
      const midNote = document.getElementById('mid-note');
      const trendRow = document.getElementById('trend-row');
      const card1 = document.getElementById('young-trend');
      const card2 = document.getElementById('rely-tech');
      const card3 = document.getElementById('limited-time');
      if (!section || !pin || !intro || !midNote || !trendRow || !card1 || !card2 || !card3) return;

      const SCROLL_LENGTH = 2500; // total pinned scroll distance in px

      // Ensure section height supports sticky duration
      section.style.minHeight = `calc(100vh + ${SCROLL_LENGTH}px)`;

      function render() {
        const start = section.offsetTop;
        const y = window.scrollY;
        const delta = Math.min(Math.max(y - start, 0), SCROLL_LENGTH);

        // Reset all
        intro.classList.remove('visible');
        midNote.classList.remove('visible');
        trendRow.classList.remove('visible');
        card1.classList.remove('visible');
        card2.classList.remove('visible');
        card3.classList.remove('visible');
        midNote.setAttribute('aria-hidden', 'true');
        trendRow.setAttribute('aria-hidden', 'true');
        card1.setAttribute('aria-hidden', 'true');
        card2.setAttribute('aria-hidden', 'true');
        card3.setAttribute('aria-hidden', 'true');

        if (delta < 500) {
          intro.classList.add('visible');
        } else if (delta < 1000) {
          midNote.classList.add('visible');
          midNote.setAttribute('aria-hidden', 'false');
        } else {
          trendRow.classList.add('visible');
          trendRow.setAttribute('aria-hidden', 'false');
          // show all three together
          card1.classList.add('visible');
          card2.classList.add('visible');
          card3.classList.add('visible');
          card1.setAttribute('aria-hidden', 'false');
          card2.setAttribute('aria-hidden', 'false');
          card3.setAttribute('aria-hidden', 'false');
        }
      }

      window.addEventListener('scroll', render, { passive: true });
      window.addEventListener('resize', render);
      render();
    }

    // 实现滚动时的视差效果
    function initStickyEffect() {
       const parallaxWrapper = document.querySelector('.parallax-wrapper');
       const parallaxContainer = document.getElementById('parallax-container');
      const earthSection = document.querySelector('.earth-section');
       const earthLayers = document.querySelector('.earth-layers');
       const progressRing = document.querySelector('.progress-ring');
       const progressSections = document.querySelectorAll('.progress-circle');
       const titleTexts = document.querySelectorAll('.title-text');
       const phoneScreens = document.querySelectorAll('.phone-screen');
       
       if (!parallaxWrapper || !parallaxContainer || !earthSection || !earthLayers || !progressRing) return;
       
       // 获取earth-section的底部位置
       const earthSectionBottom = earthSection.offsetTop + earthSection.offsetHeight;
       const viewportHeight = window.innerHeight;
       let hasStartedParallax = false;
      
      function handleScroll() {
        const scrollY = window.scrollY;
         const earthSectionTop = earthSection.offsetTop;
         const earthSectionBottom = earthSectionTop + earthSection.offsetHeight;
         const parallaxStartY = earthSectionBottom;
         const parallaxEndY = parallaxStartY + (viewportHeight * 3);
         
         // 当earth-section完全进入视窗时，显示图像在初始位置
         if (scrollY >= earthSectionTop && scrollY < parallaxStartY) {
           parallaxWrapper.className = 'parallax-wrapper initial';
           earthLayers.classList.remove('hidden'); // 显示原始圆圈
           progressRing.classList.remove('visible'); // 隐藏进度条
           titleTexts.forEach(title => title.classList.remove('visible')); // 隐藏所有标题
           phoneScreens.forEach(screen => screen.classList.remove('active')); // 隐藏所有屏幕
           hasStartedParallax = false;
         }
        // 当进入视差区域时，滑动到中心并隐藏原始圆圈
        else if (scrollY >= parallaxStartY && scrollY <= parallaxEndY) {
          parallaxWrapper.className = 'parallax-wrapper center';
          
          // 一旦开始视差效果，就隐藏原始圆圈并显示进度条
          if (!hasStartedParallax) {
            earthLayers.classList.add('hidden');
            progressRing.classList.add('visible');
            hasStartedParallax = true;
          }
          
          // 每次都重新触发进度条动画
          progressRing.classList.add('visible');
          animateProgressBars();
          
          // 根据滚动进度显示不同的标题
          const progress = (scrollY - parallaxStartY) / (viewportHeight * 3);
          const scale = 1 + (progress * 0.1); // 从1.0轻微缩放到1.1
          parallaxWrapper.style.transform = `translate(-50%, -50%) scale(${scale})`;
          
          // 控制标题显示
          updateTitles(progress);
        }
         // 超过视差区域时，隐藏图像并恢复原始圆圈
         else if (scrollY > parallaxEndY) {
           parallaxWrapper.className = 'parallax-wrapper';
           earthLayers.classList.remove('hidden'); // 恢复显示原始圆圈
           progressRing.classList.remove('visible'); // 隐藏进度条
           titleTexts.forEach(title => title.classList.remove('visible')); // 隐藏所有标题
           phoneScreens.forEach(screen => screen.classList.remove('active')); // 隐藏所有屏幕
           hasStartedParallax = false;
         }
         // 在earth-section之前，完全隐藏图像
         else {
           parallaxWrapper.className = 'parallax-wrapper';
           earthLayers.classList.remove('hidden'); // 确保原始圆圈可见
           progressRing.classList.remove('visible'); // 确保进度条隐藏
           titleTexts.forEach(title => title.classList.remove('visible')); // 隐藏所有标题
           phoneScreens.forEach(screen => screen.classList.remove('active')); // 隐藏所有屏幕
           hasStartedParallax = false;
         }
      }
      
       // 更新标题显示函数
       function updateTitles(progress) {
         const parallaxImage = document.querySelector('.parallax-image');
         const phoneScreens = document.querySelectorAll('.phone-screen');
         
         // 隐藏所有标题
         titleTexts.forEach(title => {
           title.classList.remove('visible');
         });
         
         // 隐藏所有屏幕
         phoneScreens.forEach(screen => {
           screen.classList.remove('active');
         });
         
         // 移除所有颜色类
         parallaxImage.classList.remove('color-bottom', 'color-middle', 'color-top');
         
         // 根据滚动进度显示对应的标题、颜色和屏幕
         if (progress >= 0 && progress < 0.33) {
           // 第一个窗口高度：显示第一个标题 - 蓝色（bottom层）
           titleTexts[0].classList.add('visible');
           phoneScreens[0].classList.add('active'); // 显示第一个屏幕
           changeImageWithTransition('Photo/buttom1.png', 1.2);
           console.log('切换到buttom1图片和屏幕1, progress:', progress);
          } else if (progress >= 0.33 && progress < 0.66) {
            // 第二个窗口高度：显示第二个标题 - 浅紫色（middle层）
            titleTexts[1].classList.add('visible');
            phoneScreens[1].classList.add('active'); // 显示第二个屏幕
            changeImageWithTransition('Photo/buttom2.png', 1.2);
            console.log('切换到buttom2图片和屏幕2, progress:', progress);
          } else if (progress >= 0.66) {
            // 第三个窗口高度：显示第三个标题 - 绿色（top层）
            titleTexts[2].classList.add('visible');
            phoneScreens[2].classList.add('active'); // 显示第三个屏幕
            changeImageWithTransition('Photo/buttom3.png', 1.2);
            console.log('切换到buttom3图片和屏幕3, progress:', progress);
         }
         
         // 调试信息
         console.log('当前进度:', progress, '第三个标题可见:', titleTexts[2].classList.contains('visible'));
       }
       
       // 带过渡效果的图片切换函数
       function changeImageWithTransition(newSrc, scaleSize = 1) {
         const parallaxImage = document.querySelector('.parallax-image');
         if (parallaxImage.src.includes(newSrc) && parallaxImage.style.transform.includes(`scale(${scaleSize})`)) return; // 如果已经是目标图片和缩放，不重复切换
         
         // 淡出
         parallaxImage.style.opacity = '0.3';
         parallaxImage.style.transform = 'scale(0.95)';
         
         setTimeout(() => {
           // 切换图片
           parallaxImage.src = newSrc;
           
           // 淡入并应用缩放
           parallaxImage.style.opacity = '1';
           parallaxImage.style.transform = `scale(${scaleSize})`;
         }, 300); // 300ms后切换图片
       }
      
      // 进度条动画函数
      let animationTimeout;
      function animateProgressBars() {
        // 清除之前的动画
        if (animationTimeout) {
          clearTimeout(animationTimeout);
        }
        
        // 首先重置所有进度条到初始状态
        progressSections.forEach((section) => {
          section.style.strokeDashoffset = '703';
        });
        
        // 然后依次动画每个进度条
        progressSections.forEach((section, index) => {
          setTimeout(() => {
            section.style.strokeDashoffset = '0';
          }, index * 500); // 每个进度条间隔500ms动画
        });
      }
      
      // 初始化时确保图像处于隐藏状态
      parallaxWrapper.className = 'parallax-wrapper';
      
      // 监听滚动事件
      window.addEventListener('scroll', handleScroll);
      
      // 初始检查
      handleScroll();
    }

    // Data URI constants for the three layers
    const LAYER_DATA = {
      bottom: 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAABAAAAAQACAYAAAB/HSuDAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAE3NSURBVHgB7d3LdlzltS/w+a2yfAinsZWmx5bZJRnGSC/mCSI3LHucTswTYJ7A5gkwT4B5AswToHRyZNNAeQKcHmPgSwUrcTO1GwfYlmp9p5YsGd91q8u6/H5jbKpUqthhx4ia/2/O+aUAAGauf+Xh4ju/vrNYPd+JnX71mCP197+fy/z0eUr/kSIWn/+PPv/r5Je+fu4br3/9sFIMXv/yK68PfvstYxg5//fTN6ZhSuOvy3KYijTcfWn82Ct7wx82zrz21wYApisFAHAif7j8uF89VoX8fhG/W8D/Vrz3cx4/pr1C/qTFeXsMx/8/GT4XKgyehQhVgJDLQRUaCA4AYDIEAADwBlVhv1/U7xbwEf/1rKDfP3lXzM9a1U0w2O0uqAKDnP/xfFhwKk4NBAUA8HoCAAA6qSruR8VosSzj/G/FfVXo77beV/+3GDTZXlCQBjnyoOoqSJHvViHBzjs7dwfry8MAgI4RAADQStWM/cKThf5+gT/+F94fx//aWxwXg+fjacGvwOdu1UmQx4/j5/+ougiKU8Vg+/T2QEAAQBsJAABorP1FetsxWt0v8seP53dn7bXmczLVEsMqGNgdM6i6B6pw4Me/Lt0NAGgoAQAAtffSaf4fd1v1n57k9wNm74XOgSLlu8YKAGgCAQAAtaHQp+F2uwaqYCDl8m/VvoF7G2c3AwBqQgAAwFxUS/i2y+3zORX93db9iFWFPi11d3cZYS7/XhSx6aYCAOZFAADA1O0W+0/n9P+4t2l/NSzho9te6BawXwCAWRAAADBRLxb7u63850OxD4fxQiiwUCzc1SkAwCQJAAA4tmpm/9...',
      middle: 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAABAAAAAQACAYAAAB/HSuDAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUACAMZSURBVHgB7P3dsyXJcSeIuUeec++tr/4ApwBi2RSKWIga67EZ9hrN1kz7goJsSe6YyYzAkE3JTCYB86Y3YEd/QHXNHzAg/wGhYbsP0jQwjTGjCQtgbLrwIDM9DDXNh20bURRQGDTRBIpgd6M+7r3nZEbI3SMiT2RkRGaeW99V/uu+dfJkRkZERkac8J+7hweCQqFQKBSKx4Lvvv3BFf5stt1LiO4ly38WXuJzBlGugTEOAa5YcGDoq3P4EgKlc47T0FmgdPRpnSRHyoi+0i3uCvJ152JxfIBJ8S5cx+xaPL7pv8bL8vER3fIR1QmAKhou9+ko5U1rLUqdO/cTucXZj4zBj1r+slpJ2n/6pU/fBIVCoVAoFI8cCAqFQqFQKO4Lb7/945eO4OglaNsrhkg8WvOSa/AzRH9fIv4thB2weZFY+m8FQn0luT0S7hFBD59YSLsIrAwIBH9wPFV2JV0pr7xuS5E+w81eqeBzu0kXPwLrPkaHN50h5YEj5QEpDk7g5KMvfem3PgKFQqFQKBRnhioAFAqFQqGogC30bJ0nInpFSD2SVd2YzzCpZxLvyFqPhi3wPYTc5iQ6s8T36bJ75DixyAMMyXlJITDIM7HoL0JSz5ECIK2PeBX4L7V6lBQTLjREXtbeiO0neVi4iQ3+RDwQRGGAN9nboEN3k9OerNp3VVGgUCgUCkUZqgBQKBQKxXOJaLU33fY1b7GH36FJ8SWisle8Wz2QBb8n8+mtI+I+5WYPY9f6RVb27HyuQCjBFeoHSZmjeub5zigq9oFL8iqVP3kv1J8hbR9XyzvoHX6CBm+6tvvINOZduu0jdN...',
      top: 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAABAAAAAQACAYAAAB/HSuDAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUABqJtSURBVHgB7P1djxxXliWIni/78PBwkpFkSBRb6lSzs1nZjFu4aAg9BdSti+QA8zSoeYwE+u0+9UP/iYj4E/nQf2AAxWPdx7p3mEBPA4WGULioIdHFzuFVtrIoSkEqGPTwcPs658xe+xzz8AiSSkmZKSlTewWdZm5ubm5uEWZ29tprr62UQCAQCAQCgUAgEAgEAoFAIBAIBAKBQCAQCAQCgUAgEAgEAoFAIBAIBAKBQCAQCAQCgUAgEAgEAoFAIBAIBAKBQCAQCAQCgUAgEAgEAoFAIBAIBAKBQCAQCAQCgUAgEAgEAoFAIBAIBAKBQCAQCAQCgUAgEAgEAoFAIBAIBAKBQCAQCAQCgUAgEAgEAoFAIBAIBAKBQCAQCAQCgUAgEAgEAoFAIBAIBAKBQCAQCAQCgUAgEAgE3zK0EggEAoHgjxM6xjjOR03Ac0yUQCAQCAQCgeAVCAEgEAgEgu8dKJDn+1MO5lNgj1uWVpF+NP4b5/kN+H8t7Nd5cRwX0rq0bJ0wEKJAIBAIBALBDw5OCQQCgUDw/cAqg69zdI8Af/9gn8N7PD/YPzC8Iq+aSIKDgwOt9jGztqW9FPnjtf29vRVpgOd7+3sRn8DvzySCkAECgUAgEAh+CBAFgEAgEAi+U+SsvF7dkWJ6EtdS+jnS12pvP4IQuHv3rj5Uh2rn4U5aaU9dJAAID2idnd2HtD5e31vl/pkw4EV78Xz7WV3wipZAIBAIBAKB4E8HQgAIBAKB4DsDgn8KyA2C8QNF2Xm1t2IDOPNPgf3dw7v6IQXyDw4f6N3dXXV4SIH/9g7fvx4cPbgQrGP5K8t2M0mwRhDsE...'
    };

    // Earth layer interaction functionality
    function initEarthInteraction() {
      const canvases = document.querySelectorAll('.earth-layer');
      const infoItems = document.querySelectorAll('.info-item');
      const earthLayersContainer = document.querySelector('.earth-layers');
      
      // 初始化：显示bottom层内容
      showInfoForLayer('bottom');
      
      // 设置canvas
      setupCanvases();
      
      function setupCanvases() {
        const imageFiles = {
          'bottom': 'Photo/bottom.png',
          'middle': 'Photo/middle.png', 
          'top': 'Photo/top.png'
        };
        
        canvases.forEach(canvas => {
          const layerType = canvas.getAttribute('data-layer');
          const ctx = canvas.getContext('2d');
          
          // 设置canvas尺寸
          canvas.width = 675;
          canvas.height = 675;
          
          // 加载对应的PNG图片
          const img = new Image();
          img.onload = function() {
            // 清空canvas
            ctx.clearRect(0, 0, 675, 675);
            // 绘制图片
            ctx.drawImage(img, 0, 0, 675, 675);
          };
          img.src = imageFiles[layerType];
        });
      }
      
      // 使用mousemove事件来检测鼠标位置
      earthLayersContainer.addEventListener('mousemove', function(e) {
        const rect = this.getBoundingClientRect();
        const mouseX = e.clientX - rect.left;
        const mouseY = e.clientY - rect.top;
        
        // 检查是否在地球范围内
        const centerX = rect.width / 2;
        const centerY = rect.height / 2;
        const distance = Math.sqrt(
          Math.pow(mouseX - centerX, 2) + Math.pow(mouseY - centerY, 2)
        );
        const radius = rect.width / 2;
        
        if (distance > radius) {
          return; // 鼠标在地球外
        }
        
        // 使用基于区域的检测
        const detectedLayer = detectLayerByRegion(mouseX, mouseY, rect);
        showInfoForLayer(detectedLayer);
      });
      
      function detectLayerByRegion(mouseX, mouseY, rect) {
        // 将鼠标位置转换为相对坐标 (0-1)
        const x = mouseX / rect.width;
        const y = mouseY / rect.height;
        
        // 计算距离中心的相对距离
        const centerX = 0.5;
        const centerY = 0.5;
        const distanceFromCenter = Math.sqrt(
          Math.pow(x - centerX, 2) + Math.pow(y - centerY, 2)
        );
        
        // 使用更精确的区域检测，基于实际图片内容
        // 根据PNG图片的实际布局来优化检测
        
        // 边缘区域 (距离中心 > 40%) - 蓝色海洋
        if (distanceFromCenter > 0.4) {
          return 'bottom';
        }
        // 外围区域 (距离中心 25-40%) - 大陆边缘
        else if (distanceFromCenter > 0.25) {
          // 在特定角度范围内检测大陆
          const angle = Math.atan2(y - centerY, x - centerX);
          const angleDeg = (angle * 180 / Math.PI + 360) % 360;
          
          // 大陆通常在特定角度范围内
          if ((angleDeg > 30 && angleDeg < 150) || 
              (angleDeg > 210 && angleDeg < 330)) {
            return 'middle';
          } else {
            return 'bottom';
          }
        }
        // 中心区域 (距离中心 < 25%) - 城市密集区
        else {
          return 'top';
        }
      }
      
      function showInfoForLayer(layerType) {
        // 隐藏所有文字内容
        infoItems.forEach(item => {
          item.classList.remove('active');
        });
        
        // 显示对应的文字内容
        const targetInfo = document.querySelector(`.info-item[data-layer="${layerType}"]`);
        if (targetInfo) {
          targetInfo.classList.add('active');
        }
        
        // 调试信息（可以在控制台查看）
        console.log('当前显示图层:', layerType);
      }
    }

      // Expandable functionality
      function toggleExpandable(element) {
      const content = element.nextElementSibling;
      const isExpanded = element.classList.contains('expanded');
      
      if (isExpanded) {
        element.classList.remove('expanded');
        content.classList.remove('expanded');
      } else {
        element.classList.add('expanded');
        content.classList.add('expanded');
      }
    }

    // Toggle content with add icon
    function toggleContent(iconElement) {
      const titleElement = iconElement.parentElement;
      const content = titleElement.nextElementSibling;
      const isExpanded = titleElement.classList.contains('expanded');
      
      if (isExpanded) {
        titleElement.classList.remove('expanded');
        content.classList.remove('expanded');
        iconElement.textContent = '+';
      } else {
        titleElement.classList.add('expanded');
        content.classList.add('expanded');
        iconElement.textContent = '−';
      }
    }

    // Row toggle for fc-list
    function toggleRow(btn) {
      const row = btn.closest('.fc-row');
      const next = row.nextElementSibling;
      if (!next || !next.classList.contains('fc-row-content')) return;
      const isOpen = row.classList.contains('open');
      if (isOpen) {
        row.classList.remove('open');
      } else {
        row.classList.add('open');
      }
    }

    // Random Trip Actions Generator
    const ANGLER_ACTIONS = [
      'Check weather',
      'Target species',
      'Target location',
      'Get fishing license',
      'Verify local regulations',
      'Pack',
      'Prepare bait',
      'Inspect line/leader',
      'Sharpen hooks',
      'Download offline maps',
      'Load waypoints',
      'Check PFDs and safety kit',
      'Confirm boat/kayak condition and fuel/air',
      'Pack cooler, ice, and fish bag',
      'Carry measuring items',
      'Set departure time',
      'Tell someone your plan and ETA',
    ];

    function sampleActions(source, count) {
      const array = [...source];
      for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
      }
      return array.slice(0, count);
    }

    let CURRENT_ITEMS = [];

    function rectsOverlap(ax, ay, aw, ah, bx, by, bw, bh, margin = 8) {
      return !(
        ax + aw + margin <= bx ||
        bx + bw + margin <= ax ||
        ay + ah + margin <= by ||
        by + bh + margin <= ay
      );
    }

    function findNonOverlappingPosition(bw, bh, fieldWidth, fieldHeight, placed, attempts = 200) {
      for (let i = 0; i < attempts; i++) {
        const x = Math.max(0, Math.random() * Math.max(0, fieldWidth - bw));
        const y = Math.max(0, Math.random() * Math.max(0, fieldHeight - bh));
        let ok = true;
        for (let j = 0; j < placed.length; j++) {
          const p = placed[j];
          if (rectsOverlap(x, y, bw, bh, p.x, p.y, p.w, p.h)) {
            ok = false;
            break;
          }
        }
        if (ok) return { x, y };
      }
      return null; // not found
    }

    function renderBubbles(count = 12, presetItems = null) {
      const field = document.getElementById('bubble-field');
      if (!field) return;
      field.innerHTML = '';
      const items = presetItems && presetItems.length ? presetItems : sampleActions(ANGLER_ACTIONS, count);
      CURRENT_ITEMS = items;
      const fieldWidth = field.clientWidth;
      const fieldHeight = field.clientHeight;
      const placed = [];
      items.forEach(text => {
        const b = document.createElement('div');
        b.className = 'action-bubble';
        // Randomize bubble size between 100px and 220px
        const size = Math.floor(100 + Math.random() * 120);
        b.style.setProperty('--bubble-size', size + 'px');
        b.textContent = text;
        field.appendChild(b);
        // Measure and place without overlap
        const bw = b.offsetWidth;
        const bh = b.offsetHeight;
        const pos = findNonOverlappingPosition(bw, bh, fieldWidth, fieldHeight, placed, 240);
        if (pos) {
          b.style.left = pos.x + 'px';
          b.style.top = pos.y + 'px';
          placed.push({ x: pos.x, y: pos.y, w: bw, h: bh });
        } else {
          // If no space found, remove to guarantee no overlap
          field.removeChild(b);
        }
      });
    }

    function repositionBubbles() {
      const field = document.getElementById('bubble-field');
      if (!field || !CURRENT_ITEMS.length) return;
      renderBubbles(CURRENT_ITEMS.length, CURRENT_ITEMS);
    }

    document.addEventListener('DOMContentLoaded', () => {
      renderBubbles();
      const regen = document.getElementById('regenerate-bubbles');
      if (regen) {
        regen.addEventListener('click', (e) => {
          e.preventDefault();
          renderBubbles();
        });
      }
      window.addEventListener('resize', () => {
        // debounce resize
        clearTimeout(window.__bubbleResizeTimer);
        window.__bubbleResizeTimer = setTimeout(repositionBubbles, 150);
      });
    });

  </script>
</body>
</html>

